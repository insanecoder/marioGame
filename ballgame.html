<!DOCTYPE html>
<html>
<head>
    <title>Abhinav's Game</title>
    <style>
    	canvas { background: #eee; display: block; margin: 0 auto; }
    </style>
</head>
<body>

	<div style="visibility:hidden">
<img src="missile.png" id="missile">
<img src="dragon.png" id="dragon">
<img src="dragon1.png" id="dragon1">
<img src="dragon2.png" id="dragon2">
<img src="mario1.png" id="mario1">
<img src="mario2.png" id="mario2">
<img src="mario3.png" id="mario3">
<img src="mario1_back.png" id="mario1_back">
<img src="mario2_back.png" id="mario2_back">
<img src="mario3_back.png" id="mario3_back">
<img src="mario_stage.png" id="mario_stage">
<img src="mario_down.png" id="mario_down">
<img src="mario_down_back.png" id="mario_down_back">
<img src="duck1.png" id="duck1">
<img src="duck2.png" id="duck2">
<img src="duck_dead.png" id="duck_dead">
<img src="wall1.png" id="wall1">
	</div>
<canvas autofocus id="myCanvas" style="background:white" width="700" height="320"  tabindex="1" ></canvas>
</body>

<script type="text/javascript" src="Stage.js" ></script>
<script type="text/javascript" src="Game.js" ></script>
<script type="text/javascript" src="constants.js" ></script>
<script type="text/javascript" src="canvas.js" ></script>
<script type="text/javascript" src="Point.js" ></script>
<script type="text/javascript" src="Plane.js" ></script>
<script type="text/javascript" src="QuadTree.js" ></script>
<script type="text/javascript" src="Object.js" ></script>
<script type="text/javascript" src="Rectangle.js" ></script>
<script type="text/javascript" src="Player.js" ></script>
<script type="text/javascript" src="ObjectWrapper.js" ></script>
<script type="text/javascript" src="Dragon.js" ></script>
<script type="text/javascript" src="Missile.js" ></script>
<script type="text/javascript" src="Duck.js" ></script>

	
<script>
	
var canvasObj=Canvas.getInstance(CANVAS_ID);
var g=new Game(canvasObj);
	
window.onblur= function(){
	if(g.gameStatus == GAME_RUNNING){
		g.setGameStatus(GAME_PAUSE);
	}
}


window.onload=function(){
	
document.getElementById(CANVAS_ID).addEventListener('click',function changeGameStatus(){
	if(g.gameStatus!= GAME_RUNNING){
		g.setGameStatus(GAME_RUNNING);
	}
});

document.addEventListener('keydown', function(event){
	if(event.keyCode >= 37 && event.keyCode<=40 ){
		g.addEvent(event.keyCode);
	}
});
	
	
document.addEventListener('keyup', function(event){
	g.clearEvent();
});
	setInterval( 
		function(){
			if(g.gameStatus == GAME_RUNNING){
				g.clearScreen();
				g.start();
			}else{
				g.fillTextInsideCanvas(g.gameStatus);
			}
		}, 100);
}	
</script>
</html>
